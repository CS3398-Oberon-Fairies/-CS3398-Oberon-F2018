<!DOCTYPE html>
<html>
<head> 
        
    <title>Priority Parking</title>
        
    <link href="css/style.css" type="text/css" rel="stylesheet">
    <link href="css/leaflet.css" type="text/css" rel="stylesheet">
        
    <script type='text/javascript' src='js/jquery-3.3.1.min.js'></script>
    <script type='text/javascript' src='js/leaflet.js'></script>
        
              
</head>
<body>
        
    <div class="wrapper">
        <div class="heading">
            <h1>Priority Parking</h1>
        </div>
        <div class="description">
            Our goal is to help students, teachers, and other individuals find parking in an easier and more efficient manner.
        </div>
        
        <div class="btn-wrapper">
        <div class= "btn-group">
            <button>Just parked</button>
            <button>Just left</button>
            <button>Lot is full</button>
        </div>
        </div>    
             
        <div id="map">
        </div>
        
        <script>            
            
            var mylat = '29.8833';
            var mylong = '-97.9414';
            var myzoom = '13';
            var map = L.map('map').setView([mylat, mylong], myzoom);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
	           maxZoom: 17,
	           attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            }).addTo(map);

            function showMarker(poi, ae){
	           L.marker([poi[ae["Latitude"]], poi[ae["Longitude"]]]).addTo(map);
	           L.marker([poi[ae["Latitude"]], poi[ae["Longitude"]]]).addTo(map).bindPopup(poi[ae["LotName"]]);
            }

            $.getJSON("http://localhost:5000/location/search/" + mylat + "," + mylong, function(data){
	           var alias_encoding = {};
	           for(var it = 0; it < data.alias.length; it++) alias_encoding[data.alias[it]] = it;
	           for(var it = 0; it < data.result.length; it++) showMarker(data.result[it], alias_encoding)
            });
            
        </script>

        
        <div class="footer">
            Team Oberon Fairies
        </div>
        
        
    </div>

</body>
</html>